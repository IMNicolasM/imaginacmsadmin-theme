"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[4496],{24496:(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t(92444),i=t(74044);const r={id:"pageId",class:"q-layout-page layout-padding"},o={class:"relative-position q-mb-lg backend-page"},d={class:"box"},l={class:"row gutter-x-sm gutter-y-sm"},n={class:"col-md-12"},m={class:"q-title"},h={class:"q-subheading"},u={class:"col-md-12"},g={class:"list-group-item"};function c(e,s,t,c,p,f){const v=(0,a.E1)("draggable"),b=(0,a.E1)("inner-loading");return(0,a.Wz)(),(0,a.An)("div",r,[(0,a.QD)("div",o,[(0,a.QD)("div",d,[(0,a.QD)("div",l,[(0,a.QD)("div",n,[(0,a.QD)("div",m,(0,i.WA)(p.form.title),1),(0,a.QD)("div",h,(0,i.WA)(p.form.user.fullName),1)]),(0,a.QD)("div",u,[(0,a.K2)(v,(0,a.Gu)({onChange:f.handleEvents},f.dragOptions,{modelValue:p.fields,"onUpdate:modelValue":s[0]||(s[0]=e=>p.fields=e),"item-key":"id",tag:"transition-group"}),{item:(0,a.Ql)((({element:e})=>[(0,a.QD)("div",g,[(0,a.mY)((0,i.WA)(e.label)+" (",1),(0,a.QD)("small",null,(0,i.WA)(e.typeName),1),(0,a.mY)(") ")])])),_:1},16,["onChange","modelValue"])])])]),(0,a.K2)(b,{visible:p.loading},null,8,["visible"])])])}var p=t(10328),f=t.n(p);const v={display:"Transitions",components:{draggable:f()},data(){return{loading:!1,form:{user:{fullName:""}},fields:[]}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){this.getForm(),this.getFields()},methods:{getForm(){this.loading=!0;let e={params:{include:"user"}};this.$crud.show("apiRoutes.qform.forms",this.$route.params.id,e).then((e=>{this.form=e.data,this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1}))}))},getFields(){this.loading=!0;let e={params:{filter:{formId:this.$route.params.id,order:{field:"order"}}}};this.$crud.index("apiRoutes.qform.fields",e).then((e=>{this.fields=e.data,this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1}))}))},updateOrderInField(e,s){e.order=s,this.$crud.update("apiRoutes.qform.fields",e.id,e).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`})})).catch((e=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"})}))},handleEvents(e){this.updateOrderInField(e.moved.element,e.moved.newIndex)}}};var b=t(68716),$=t(41628),q=t(95252),Q=t.n(q);const D=(0,b.c)(v,[["render",c]]),R=D;Q()(v,"components",{QLayout:$.c})}}]);