"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[9256],{9256:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ye});var n=r(92444);function l(e,t,r,l,a,o){const u=(0,n.E1)("q-btn"),i=(0,n.E1)("schedulerModal");return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(u,{color:"primary",label:"back to schedule",icon:"fa-duotone fa-calendar-plus",class:"tw-my-4",onClick:o.getUrlSchedule},null,8,["onClick"]),(0,n.K2)(i)])}var a=r(36852),o=r(75836),u=r(49456),i=r.n(u),s=(0,o.cB)({showModal:!1,titleModal:"",form:{carrierId:null,stationId:null,acTypeId:null,fromDate:null,untilDate:null,operationTypeId:null,flightNumber:null,inboundScheduleArrival:null,outboundScheduleDeparture:null,outboundFlightNumber:null,daysOfWeek:[],customerId:null,contractId:null,depDays:null},loading:!1,updateModal:!1,refFormScheduler:null});function c(e){if(!e)return"";var t=i()(e).format("MM/DD/YYYY HH:mm");return t}var d=(0,n.S6)((function(){return{get showModal(){return s.showModal},set showModal(e){s.showModal=e},get refFormScheduler(){return s.refFormScheduler},set refFormScheduler(e){s.refFormScheduler=e},get titleModal(){return s.titleModal},set titleModal(e){s.titleModal=e},get loading(){return s.loading},set loading(e){s.loading=e},get updateModal(){return s.updateModal},set updateModal(e){s.updateModal=e},get form(){return s.form},set form(e){e.id&&(s.form.id=e.id),s.form.carrierId=e.carrierId,s.form.stationId=e.stationId,s.form.acTypeId=e.acTypeId,s.form.fromDate=e.fromDate?i()(e.fromDate).format("MM/DD/YYYY"):null,s.form.untilDate=e.untilDate?i()(e.untilDate).format("MM/DD/YYYY"):null,s.form.operationTypeId=e.operationTypeId,s.form.flightNumber=e.flightNumber,s.form.inboundScheduleArrival=e.inboundScheduleArrival?i()(e.inboundScheduleArrival).format("HH:mm"):null,s.form.outboundScheduleDeparture=e.outboundScheduleDeparture?i()(e.outboundScheduleDeparture).format("HH:mm"):null,s.form.outboundFlightNumber=e.outboundFlightNumber,s.form.daysOfWeek=e.daysOfWeek||[],s.form.customerId=e.customerId,s.form.contractId=e.contractId,s.form.depDays=e.depDays||null},reset:function(){s.form={carrierId:null,stationId:null,acTypeId:null,fromDate:null,untilDate:null,operationTypeId:null,flightNumber:null,inboundScheduleArrival:null,outboundScheduleDeparture:null,outboundFlightNumber:null,daysOfWeek:[],customerId:null,contractId:null,depDays:null},s.showModal=!1},validateOperationType:function(){var e;if(s.form.operationTypeId){var t=(0,a["default"])().getOperationTypeList().find((function(e){return e.id===Number(s.form.operationTypeId)})),r=null===(e=null===t||void 0===t?void 0:t.options)||void 0===e?void 0:e.type;r&&("inbound"===r&&(s.form.outboundScheduleDeparture=null,s.form.outboundFlightNumber=null),"outbound"===r&&(s.form.inboundScheduleArrival=null,s.form.flightNumber=null))}},dateFormatterFull:c}})).value;const f=d;var m={class:"tw-px-4"};function p(e,t,r,l,a,o){var u=(0,n.E1)("formFields"),i=(0,n.E1)("master-modal");return(0,n.Wz)(),(0,n.Az)(i,{modelValue:e.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.showModal=t}),title:e.titleModal,persistent:!0,"custom-position":"",actions:e.actions,loading:e.loading,onHide:e.clear},{default:(0,n.Ql)((function(){return[(0,n.QD)("div",m,[(0,n.K2)(u,{ref:"refFormFields"},null,512)])]})),_:1},8,["modelValue","title","actions","loading","onHide"])}var b=r(20584),h=r(30152),y=r(86284),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},v.apply(this,arguments)},g=function(e,t,r,n){function l(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{i(n.next(e))}catch(t){a(t)}}function u(e){try{i(n["throw"](e))}catch(t){a(t)}}function i(e){e.done?r(e.value):l(e.value).then(o,u)}i((n=n.apply(e,t||[])).next())}))},w=function(e,t){var r,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return i([e,t])}}function i(u){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,u[0]&&(o=0)),o)try{if(r=1,n&&(l=2&u[0]?n["return"]:u[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,u[1])).done)return l;switch(n=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(i){u=[6,i],n=0}finally{r=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function I(){return g(this,void 0,Promise,(function(){var e,t,r;return w(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=(0,h.c)().getIsPassenger(),t=e?{businessUnitId:y.GK}:{},f.loading=!0,f.validateOperationType(),[4,b.c.create("apiRoutes.qramp.schedulers",v(v({},f.form),t))];case 1:return n.sent(),f.loading=!1,[3,3];case 2:return r=n.sent(),f.loading=!1,console.log(r,"saveScheduler"),[3,3];case 3:return[2]}}))}))}var S=function(){return S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},S.apply(this,arguments)},D=function(e,t,r,n){function l(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{i(n.next(e))}catch(t){a(t)}}function u(e){try{i(n["throw"](e))}catch(t){a(t)}}function i(e){e.done?r(e.value):l(e.value).then(o,u)}i((n=n.apply(e,t||[])).next())}))},M=function(e,t){var r,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return i([e,t])}}function i(u){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,u[0]&&(o=0)),o)try{if(r=1,n&&(l=2&u[0]?n["return"]:u[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,u[1])).done)return l;switch(n=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(i){u=[6,i],n=0}finally{r=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function A(){return D(this,void 0,Promise,(function(){var e,t,r,n;return M(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),e=(0,h.c)().getIsPassenger(),t=e?{businessUnitId:y.GK}:{},f.loading=!0,f.validateOperationType(),r=S(S({},f.form),t),[4,b.c.update("apiRoutes.qramp.schedulers",f.form.id,r)];case 1:return l.sent(),f.loading=!1,[3,3];case 2:return n=l.sent(),f.loading=!1,console.log(n,"updateScheduler"),[3,3];case 3:return[2]}}))}))}var N=r(8932),T=function(e,t,r,n){function l(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{i(n.next(e))}catch(t){a(t)}}function u(e){try{i(n["throw"](e))}catch(t){a(t)}}function i(e){e.done?r(e.value):l(e.value).then(o,u)}i((n=n.apply(e,t||[])).next())}))},k=function(e,t){var r,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return i([e,t])}}function i(u){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,u[0]&&(o=0)),o)try{if(r=1,n&&(l=2&u[0]?n["return"]:u[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,u[1])).done)return l;switch(n=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(i){u=[6,i],n=0}finally{r=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function F(){var e=this,t=(0,n.S6)((function(){return[{props:{loading:f.loading,color:"primary","icon-right":"fa-thin fa-floppy-disk",label:N._s.tr("isite.cms.label.save")},action:function(){f.refFormScheduler&&f.refFormScheduler.validate().then((function(t){return T(e,void 0,void 0,(function(){return k(this,(function(e){switch(e.label){case 0:return t?f.form.id?[4,A()]:[3,2]:[3,6];case 1:return e.sent(),[3,4];case 2:return[4,I()];case 3:e.sent(),e.label=4;case 4:return[4,f.reset()];case 5:e.sent(),N.kN.emit("crud.data.refresh"),e.label=6;case 6:return[2]}}))}))}))}}]}));return{actions:t}}function C(){var e=(0,o.IL)(null),t=(0,n.S6)((function(){return f.loading})),r=(0,n.S6)((function(){return f.titleModal})),l=(0,n.S6)({get:function(){return f.showModal},set:function(e){f.showModal=e}});function a(){f.reset()}var u=F().actions;return{showModal:l,actions:u,refFormFields:e,clear:a,loading:t,titleModal:r}}var O={class:"tw-grid md:tw-grid-cols-2 tw-gap-4"},_={key:0},W={key:1},Y={key:2};function q(e,t,r,l,a,o){var u=(0,n.E1)("customer"),i=(0,n.E1)("dynamic-field"),s=(0,n.E1)("q-form");return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(s,{ref:"refFormScheduler"},{default:(0,n.Ql)((function(){return[(0,n.QD)("div",O,[(0,n.QD)("div",null,[(0,n.K2)(u,{dataForm:e.form,addNewOptions:!1,readonly:e.updateModal,ref:"refCustomer"},null,8,["dataForm","readonly"]),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.left,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",{key:r},[(0,n.K2)(i,{modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])])})),128))]),(0,n.QD)("div",null,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.right,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",{key:r},[(0,n.K2)(i,{modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])])})),128))])]),(0,n.QD)("div",null,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.center,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",{key:r},[(0,n.K2)(i,{modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])])})),128))]),e.isbound.inbound?((0,n.Wz)(),(0,n.An)("div",_,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.inbound,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(i,{field:t,modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t}},null,8,["field","modelValue","onUpdate:modelValue"])])})),256))])):(0,n.g1)("",!0),e.isbound.outbound?((0,n.Wz)(),(0,n.An)("div",W,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.outbound,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(i,{field:t,modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t}},null,8,["field","modelValue","onUpdate:modelValue"])])})),256))])):(0,n.g1)("",!0),e.isbound.inbound&&e.isbound.outbound?((0,n.Wz)(),(0,n.An)("div",Y,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(e.formFields.full,(function(t,r){return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(i,{field:t,modelValue:e.form[r],"onUpdate:modelValue":function(t){return e.form[r]=t}},null,8,["field","modelValue","onUpdate:modelValue"])])})),256))])):(0,n.g1)("",!0)]})),_:1},512)])}var x=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"}];function V(){var e=(0,n.S6)((function(){return f.updateModal})),t=(0,n.S6)((function(){return(0,h.c)().getIsPassenger()})),r=(0,n.S6)((function(){return t.value?y.mI:y.wz})),l=(0,n.S6)((function(){return{left:{carrierId:{value:null,type:"select",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:N._s.tr("ifly.cms.sidebar.airline")},loadOptions:{apiRoute:"apiRoutes.qfly.airlines",select:{label:"airlineName",id:"id"},refresh:!0}},stationId:{value:null,type:"select",loadOptions:{apiRoute:"apiRoutes.qsetupagione.setupStations",select:{label:"fullName",id:"id"},requestParams:{filter:{companyId:r.value}}},props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"Station",clearable:!0,readonly:e.value}},acTypeId:{value:null,type:"select",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:N._s.tr("ifly.cms.sidebar.aircraftType"),options:(0,a["default"])().getACTypesList().map((function(e){return{label:e.model,value:e.id}}))}}},right:{fromDate:{value:"",type:"date",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],hint:"Format: MM/DD/YYYY",mask:"MM/DD/YYYY","place-holder":"MM/DD/YYYY",label:"* From Date",clearable:!0,color:"primary",format24h:!0,readonly:e.value},label:N._s.tr("ifly.cms.form.scheduledArrival")},untilDate:{value:"",type:"date",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],hint:"Format: MM/DD/YYYY",mask:"MM/DD/YYYY","place-holder":"MM/DD/YYYY",label:"* Until Date",clearable:!0,color:"primary",format24h:!0,readonly:e.value},label:N._s.tr("ifly.cms.form.scheduledArrival")},daysOfWeek:{value:null,type:"select",props:{multiple:!0,rules:[function(e){return e.length>0||N._s.tr("isite.cms.message.fieldRequired")}],label:"Days Of Week",alphabeticalSort:!1,options:x,readonly:e.value}}},center:{operationTypeId:{value:null,type:"select",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(N._s.tr("ifly.cms.form.operation")),clearable:!0,color:"primary",options:(0,a["default"])().getOperationTypeList()},label:N._s.tr("ifly.cms.form.operation")}},inbound:{flightNumber:{value:null,type:"input",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(N._s.tr("ifly.cms.form.flight")),clearable:!0,maxlength:10,color:"primary"},label:N._s.tr("ifly.cms.form.flight")},inboundScheduleArrival:{value:"",type:"hour",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"* Inbound Schedule Arrival",clearable:!0,color:"primary",format24h:!0},label:N._s.tr("ifly.cms.form.scheduledArrival")}},outbound:{outboundFlightNumber:{value:null,type:"input",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"*Outbound Flight Number",clearable:!0,maxlength:10,color:"primary"},label:N._s.tr("ifly.cms.form.flight")},outboundScheduleDeparture:{value:"",type:"hour",props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"*Outbound Schedule Departure ",clearable:!0,color:"primary",format24h:!0},label:N._s.tr("ifly.cms.form.scheduledArrival")}},full:{depDays:{value:null,type:"input",props:{type:"number",label:"Dep. +Days",clearable:!0,maxlength:10,color:"primary"},label:N._s.tr("ifly.cms.form.flight")}}}}));return{formFields:l}}function P(){var e=(0,o.IL)(null),t=(0,o.IL)(null),r=(0,n.S6)((function(){return f.form})),l=(0,n.S6)((function(){return f.loading})),u=(0,n.S6)((function(){return f.updateModal})),i=V().formFields,s=(0,n.S6)((function(){var e;if(r.value.operationTypeId){var t=(0,a["default"])().getOperationTypeList().find((function(e){return e.id===Number(r.value.operationTypeId)})),n=null===(e=null===t||void 0===t?void 0:t.options)||void 0===e?void 0:e.type;if(n){if("full"===n)return{inbound:!0,outbound:!0};if("inbound"===n)return{inbound:!0,outbound:!1};if("outbound"===n)return{inbound:!1,outbound:!0}}}return{inbound:!1,outbound:!1}}));return(0,n.u2)((function(){f.refFormScheduler=e.value})),{formFields:i,form:r,refFormScheduler:e,isbound:s,refCustomer:t,loading:l,updateModal:u}}var z=r(74044),R={class:"row cursor-pointer"},U={class:"q-pr-md"},$={class:"q-py-xs"},L={class:"cursor-pointer"};function Q(e,t,r,l,a,o){var u=(0,n.E1)("dynamic-field"),i=(0,n.E1)("q-btn");return(0,n.Wz)(),(0,n.An)("div",null,[e.state.bannerMessage?((0,n.Wz)(),(0,n.Az)(u,{key:0,class:"q-mb-md",field:e.fields.banner},null,8,["field"])):(0,n.g1)("",!0),(0,n.K2)(u,{field:e.fields.customerId,modelValue:e.state.selectCustomers,"onUpdate:modelValue":[t[1]||(t[1]=function(t){return e.state.selectCustomers=t}),e.setCustomer],onFilter:e.setCustomerName},(0,n.QP)({_:2},[e.addNewOptions?{name:"before-options",fn:(0,n.Ql)((function(){return[(0,n.QD)("div",{class:"q-py-md q-px-md",onClick:t[0]||(t[0]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.addCustumers&&e.addCustumers.apply(e,t)})},[(0,n.QD)("div",R,[(0,n.QD)("div",U,[(0,n.K2)(i,{push:"",color:"primary",round:"",icon:"fas fa-plus",size:"xs"})]),(0,n.QD)("div",$,[(0,n.QD)("label",L,(0,z.WA)(e.$tr("ifly.cms.label.createNewCustomer")),1)])])])]})),key:"0"}:void 0]),1032,["field","modelValue","onUpdate:modelValue","onFilter"])])}var K=function(e,t,r,n){function l(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{i(n.next(e))}catch(t){a(t)}}function u(e){try{i(n["throw"](e))}catch(t){a(t)}}function i(e){e.done?r(e.value):l(e.value).then(o,u)}i((n=n.apply(e,t||[])).next())}))},j=function(e,t){var r,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return i([e,t])}}function i(u){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,u[0]&&(o=0)),o)try{if(r=1,n&&(l=2&u[0]?n["return"]:u[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,u[1])).done)return l;switch(n=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(i){u=[6,i],n=0}finally{r=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function E(e){var t=this,r=(0,n.S6)((function(){return e.dataForm})),l=(0,n.S6)((function(){return e.addNewOptions})),u=(0,n.S6)((function(){return e.readonly})),i=(0,o.cB)({newCustumerAdHoc:[],bannerMessage:null,customerName:"",selectCustomers:""}),s=(0,n.S6)((function(){return{banner:{type:"banner",props:{color:"info",icon:"fas fa-exclamation-triangle",message:i.bannerMessage}},customerId:{value:"",type:"select",help:{description:'You can add a new customer to the list if it\'s not available. Type the Customer Name and click on "Create new customer". The Work Order will be created as Ad-Hoc.'},props:{rules:[function(e){return!!e||N._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(N._s.tr("ifly.cms.form.customer")),clearable:!0,color:"primary","hide-bottom-space":!1,emitValue:!1,options:i.newCustumerAdHoc,readonly:u.value},loadOptions:{delayed:(0,a["default"])().getCustomerWithContract},label:N._s.tr("ifly.cms.form.customer")}}}));function c(){if(""!==i.customerName){var e="customer-".concat((0,h.c)().numberInRange(8e3,1e3));return i.newCustumerAdHoc=[{id:e,label:i.customerName,value:i.customerName}],i.bannerMessage=N._s.tr("ifly.cms.message.requestNewCustomer"),i.selectCustomers={id:e,value:i.customerName,label:i.customerName},l.value&&(r.value.customCustomerName=i.customerName),r.value.customerId=null,r.value.contractId=null,void(i.customerName="")}N.Qb.error({message:N._s.tr("ifly.cms.message.orderaddNewrecord")})}function d(){var e=null===i.selectCustomers||void 0===i.selectCustomers||""===i.selectCustomers?{}:i.selectCustomers;if(l.value){var t=e.label||null;r.value.customCustomerName=r.value.customerId?null:t}r.value.customerId=e.id||null,r.value.contractId=e.contractId||null;var n=null;Object.keys(e).length>0&&(n=r.value.contractId?"".concat(N._s.tr("ifly.cms.message.selectedCustomerWithContract")):N._s.tr("ifly.cms.message.selectedCustomerWithoutContract")),i.bannerMessage=e&&!r.value.contractId?n:null}function f(e){i.customerName=e||""}function m(){return K(this,void 0,Promise,(function(){var e;return j(this,(function(t){switch(t.label){case 0:return[4,(0,a["default"])().getCustomerWithContractLists().find((function(e){return e.id==r.value.customerId}))];case 1:return e=t.sent(),e&&(e.label=r.value.adHoc?"".concat(e.label," (Ad Hoc)"):e.label,e.label&&(i.selectCustomers=e)),[4,d()];case 2:return t.sent(),[2]}}))}))}return(0,n.Kg)(r,(function(e,r){return K(t,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[2]}}))}))}),{deep:!0}),(0,n.u2)((function(){return K(t,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[2]}}))}))})),{fields:s,state:i,addCustumers:c,setCustomerName:f,setCustomer:d}}var H=function(){return H=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},H.apply(this,arguments)};const B=(0,n._M)({props:{dataForm:{type:Object,default:{}},addNewOptions:{type:Boolean,default:function(){return!0}},readonly:{type:Boolean,default:function(){return!1}}},setup:function(e){return H({},E(e))}});var G=r(68716),J=r(99140),X=r(95252),Z=r.n(X);const ee=(0,G.c)(B,[["render",Q]]),te=ee;Z()(B,"components",{QBtn:J.c});var re=function(){return re=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},re.apply(this,arguments)};const ne=(0,n._M)({components:{customer:te},setup:function(){return re({},P())}});var le=r(14288);const ae=(0,G.c)(ne,[["render",q]]),oe=ae;Z()(ne,"components",{QForm:le.c});var ue=function(){return ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},ue.apply(this,arguments)};const ie=(0,n._M)({components:{formFields:oe},setup:function(){return ue({},C())}}),se=(0,G.c)(ie,[["render",p]]),ce=se;var de=function(){return de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},de.apply(this,arguments)},fe=function(e,t,r,n){function l(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{i(n.next(e))}catch(t){a(t)}}function u(e){try{i(n["throw"](e))}catch(t){a(t)}}function i(e){e.done?r(e.value):l(e.value).then(o,u)}i((n=n.apply(e,t||[])).next())}))},me=function(e,t){var r,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return i([e,t])}}function i(u){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,u[0]&&(o=0)),o)try{if(r=1,n&&(l=2&u[0]?n["return"]:u[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,u[1])).done)return l;switch(n=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(i){u=[6,i],n=0}finally{r=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function pe(e){return fe(this,void 0,Promise,(function(){var t,r,n;return me(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),f.titleModal="Update scheduler Id: ".concat(e),f.updateModal=!0,f.loading=!0,f.showModal=!0,t={refresh:!0,params:{}},[4,b.c.show("apiRoutes.qramp.schedulers",e,t)];case 1:return r=l.sent(),f.form=de({},r.data),f.loading=!1,[3,3];case 2:return n=l.sent(),f.showModal=!1,f.loading=!1,console.log(n,"showScheduler"),[3,3];case 3:return[2]}}))}))}const be={components:{schedulerModal:ce},data(){return{crudId:this.$uid()}},created(){this.$nextTick((async()=>{await(0,a["default"])().getAllList()}))},computed:{filterBusinessUnit(){return this.isPassenger?y.GK:y.Ih},isPassenger(){return(0,h.c)().getIsPassenger()},filterCompany(){return this.isPassenger?y.mI:y.wz},crudData(){return{crudId:this.crudId,apiRoute:"apiRoutes.qramp.schedulers",permission:"ramp.schedulers",create:{method:async()=>{f.updateModal=!1,f.titleModal="New Scheduler",f.showModal=!0}},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:"width: 50px",action:e=>!1},{name:"customerId",label:this.$tr("isite.cms.label.customer"),field:"customerId",formatAsync:async e=>{if(!e.customerId)return"-";const t=await(0,a["default"])().getCustomerList().find((t=>t.id===e.customerId))||{};return`${t.customerName||"-"}`},align:"left"},{name:"flightNumber",label:"Flight Number",field:"flightNumber",format:e=>e||"-",align:"left"},{name:"carrier",label:"Carrier",field:"carrierId",formatAsync:async e=>{if(!e.carrierId)return"-";const t=await(0,a["default"])().getAirlinesList().find((t=>t.id===e.carrierId))||{};return`${t.airlineName||"-"}`},align:"left"},{name:"operationType",label:"Operation Type",field:"operationTypeId",formatAsync:async e=>{const t=await(0,a["default"])().getOperationTypeList().find((t=>t.id===e.operationTypeId))||{};return`${t.operationName||"-"}`},align:"left"},{name:"station",label:"Station",field:"stationId",formatAsync:async e=>{if(!e.stationId)return"-";const t=await(0,a["default"])().getStationList().find((t=>t.id===e.stationId))||{};return`${t.fullName||"-"}`},align:"left"},{name:"acTypeId",label:"acType",field:"acTypeId",formatAsync:async e=>{if(!e.acTypeId)return"-";const t=await(0,a["default"])().getACTypesList().find((t=>t.id===e.acTypeId))||{};return`${t.fullName||"-"}`},align:"left"},{name:"fromDate",label:"From Date",field:"fromDate",align:"left",format:e=>e?this.$trdT(e):"-",sortable:!0},{name:"untilDate",label:"Until Date",field:"untilDate",align:"left",format:e=>e?this.$trdT(e):"-",sortable:!0},{name:"inboundScheduledArrival",label:"Arrival",field:"inboundScheduleArrival",align:"left",format:e=>e?this.$trdT(e):"-",sortable:!0},{name:"outboundScheduleDeparture",label:"Departure",field:"outboundScheduleDeparture",align:"left",format:e=>e?this.$trdT(e):"-",sortable:!0},{name:"outboundFlightNumber",label:"Outbound Flight Number",field:e=>`${e.outboundFlightNumber?e.outboundFlightNumber:""}`,align:"left",format:e=>e||""},{name:"daysOfWeek",label:"Days Of Week",field:"daysOfWeek",align:"left",format:e=>e?this.convertNumbersToDays(e):""},{name:"created_at",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:e=>e?this.$trd(e):"-"},{name:"updated_at",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",align:"left",format:e=>e?this.$trd(e):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"left"}],filters:{stationId:{value:null,type:"select",props:{label:"Station",options:(0,a["default"])().getStationList().map((e=>({label:e.fullName,value:e.id}))),clearable:!0}},carrierId:{value:null,type:"select",props:{vIf:!1,label:"Carrier",options:(0,a["default"])().getAirlinesList().map((e=>({label:e.airlineName,value:e.id}))),clearable:!0}},customerId:{value:null,type:"select",quickFilter:!0,loadOptions:{apiRoute:"apiRoutes.qramp.setupCustomers",select:{label:"customerName",id:"id"},requestParams:{filter:{companyId:this.filterCompany}}},props:{label:"Customer",clearable:!0}},acTypeId:{value:null,type:"select",props:{label:this.$tr("ifly.cms.sidebar.aircraftType"),options:(0,a["default"])().getACTypesList().map((e=>({label:e.model,value:e.id}))),clearable:!0}},operationTypeId:{value:null,type:"select",props:{label:this.$tr("ifly.cms.form.operation"),clearable:!0,color:"primary","hide-bottom-space":!1,options:(0,a["default"])().getOperationTypeList().map((e=>({label:e.operationName,value:e.id})))},label:this.$tr("ifly.cms.form.operation")}},actions:[{name:"edit",icon:"fal fa-pen",label:this.$tr("isite.cms.label.edit"),action:async e=>{await pe(e.id)}}],requestParams:{filter:{withoutDefaultInclude:!0,businessUnitId:this.filterBusinessUnit}}},update:!1,delete:!0,formLeft:{},formRight:{}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}},methods:{convertNumbersToDays(e){if(!Array.isArray(e))return"";const t={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},r=e.map((e=>t[e]));return r.join(", ")},getUrlSchedule(){const e=localStorage.getItem("urlSchedule");window.location.href=e}}},he=(0,G.c)(be,[["render",l]]),ye=he;Z()(be,"components",{QBtn:J.c})}}]);